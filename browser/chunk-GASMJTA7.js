import{a as B,b as N,c as Z,d as W,e as A,f as H,g as L,h as R,i as V,j as q,k as z,l as G,m as J,n as K,o as Q,p as U,q as X,r as Y,s as ee}from"./chunk-PLJCP4HO.js";import"./chunk-SYU2HN32.js";import"./chunk-WXI33M2S.js";import{$ as M,A as f,Bb as F,Cb as P,Db as D,Eb as j,Ia as o,Ja as c,Nb as k,Pa as y,Ya as C,_a as l,_b as E,ac as O,bb as w,bc as x,cb as _,db as b,eb as n,fb as a,i as h,jb as u,ub as m,vb as S,wb as T,xb as v,yb as I,zb as $}from"./chunk-KAX6XJUW.js";var te=(t,e)=>e.time,ie=(t,e)=>({"user-message":t,"other-message":e});function ne(t,e){if(t&1&&(n(0,"div",2)(1,"div",8),m(2),a(),n(3,"div",9),m(4),D(5,"date"),a()()),t&2){let p=e.$implicit;l("ngClass",P(6,ie,p.source==="page-two",p.source==="page-one")),o(2),S(p.text),o(2),T(" ",j(5,3,p.time,"short")," ")}}function ae(t,e){t&1&&(n(0,"div",3),m(1,"Page One is typing..."),a())}var be=(()=>{let e=class e{constructor(s,r,i){this.sharedService=s,this.ngZone=r,this.cdr=i,this.messages=[],this.newMessage="",this.isOtherTyping=!1,this.typingSubject$=new h}ngOnInit(){this.subscription$=this.sharedService.messages$.subscribe(s=>{this.ngZone.run(()=>{this.messages=s,this.cdr.detectChanges()})}),this.typingSubscription$=this.sharedService.isTyping$("page-one").subscribe(s=>{this.ngZone.run(()=>{this.isOtherTyping=s,this.cdr.detectChanges()})}),this.typingSubject$.pipe(f(300)).subscribe(()=>{this.sharedService.setTyping("page-two",this.newMessage.trim().length>0)})}ngOnDestroy(){this.subscription$&&this.subscription$.unsubscribe(),this.typingSubscription$&&this.typingSubscription$.unsubscribe()}sendMessage(){this.newMessage.trim()&&(this.sharedService.addMessage({source:"page-two",text:this.newMessage,time:new Date}),this.newMessage="",this.sharedService.setTyping("page-two",!1))}onTyping(){this.typingSubject$.next()}};e.\u0275fac=function(r){return new(r||e)(c(ee),c(y),c(k))},e.\u0275cmp=M({type:e,selectors:[["app-page-two"]],standalone:!0,features:[F],decls:14,vars:3,consts:[[1,"chat-container"],[1,"chat-messages"],[1,"message",3,"ngClass"],[1,"typing-indicator"],[1,"chat-input"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Type a message...",3,"ngModelChange","keyup.enter","ngModel"],["mat-fab","","color","primary",3,"click","disabled"],[1,"message-content"],[1,"message-timestamp"]],template:function(r,i){r&1&&(n(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),m(3,"Chat (Page Two)"),a()(),n(4,"mat-card-content",1),_(5,ne,6,9,"div",2,te),C(7,ae,2,0,"div",3),a(),n(8,"mat-card-actions",4)(9,"mat-form-field",5)(10,"input",6),$("ngModelChange",function(g){return I(i.newMessage,g)||(i.newMessage=g),g}),u("keyup.enter",function(){return i.sendMessage()})("ngModelChange",function(){return i.onTyping()}),a()(),n(11,"button",7),u("click",function(){return i.sendMessage()}),n(12,"mat-icon"),m(13,"send"),a()()()()),r&2&&(o(5),b(i.messages),o(2),w(i.isOtherTyping?7:-1),o(3),v("ngModel",i.newMessage),o(),l("disabled",!i.newMessage.trim()))},dependencies:[x,E,O,W,B,N,Z,q,A,R,L,V,H,G,z,K,J,U,Q,Y,X],encapsulation:2,changeDetection:0});let t=e;return t})();export{be as PageTwoComponent};
