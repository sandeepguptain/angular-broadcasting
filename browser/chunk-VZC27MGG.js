import{a as x,b as B,c as N,d as Z,e as W,f as A,g as H,h as L,i as V,j as q,k as z,l as G,m as J,n as K,o as Q,p as R,q as U,r as X,s as Y}from"./chunk-PLJCP4HO.js";import"./chunk-SYU2HN32.js";import"./chunk-WXI33M2S.js";import{$ as M,A as f,Bb as F,Cb as I,Db as P,Eb as k,Ia as o,Ja as g,Pa as y,Ya as C,_a as l,_b as E,ac as j,bb as _,bc as D,cb as b,db as S,eb as n,fb as a,i as h,jb as u,ub as m,vb as v,wb as T,xb as w,yb as O,zb as $}from"./chunk-KAX6XJUW.js";var ee=(t,e)=>e.time,te=(t,e)=>({"user-message":t,"other-message":e});function ie(t,e){if(t&1&&(n(0,"div",2)(1,"div",8),m(2),a(),n(3,"div",9),m(4),P(5,"date"),a()()),t&2){let p=e.$implicit;l("ngClass",I(6,te,p.source==="page-one",p.source==="page-two")),o(2),v(p.text),o(2),T(" ",k(5,3,p.time,"short")," ")}}function ne(t,e){t&1&&(n(0,"div",3),m(1,"Page Two is typing..."),a())}var be=(()=>{let e=class e{constructor(s,r){this.sharedService=s,this.ngZone=r,this.messages=[],this.newMessage="",this.isOtherTyping=!1,this.typingSubject$=new h}ngOnInit(){this.subscription$=this.sharedService.messages$.subscribe(s=>{this.ngZone.run(()=>{this.messages=s})}),this.typingSubscription$=this.sharedService.isTyping$("page-two").subscribe(s=>{this.ngZone.run(()=>{this.isOtherTyping=s})}),this.typingSubject$.pipe(f(300)).subscribe(()=>{this.sharedService.setTyping("page-one",this.newMessage.trim().length>0)})}ngOnDestroy(){this.subscription$&&this.subscription$.unsubscribe(),this.typingSubscription$&&this.typingSubscription$.unsubscribe()}sendMessage(){this.newMessage.trim()&&(this.sharedService.addMessage({source:"page-one",text:this.newMessage,time:new Date}),this.newMessage="",this.sharedService.setTyping("page-one",!1))}onTyping(){this.typingSubject$.next()}};e.\u0275fac=function(r){return new(r||e)(g(Y),g(y))},e.\u0275cmp=M({type:e,selectors:[["app-page-one"]],standalone:!0,features:[F],decls:14,vars:3,consts:[[1,"chat-container"],[1,"chat-messages"],[1,"message",3,"ngClass"],[1,"typing-indicator"],[1,"chat-input"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Type a message...",3,"ngModelChange","keyup.enter","ngModel"],["mat-fab","","color","primary",3,"click","disabled"],[1,"message-content"],[1,"message-timestamp"]],template:function(r,i){r&1&&(n(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),m(3,"Chat (Page One)"),a()(),n(4,"mat-card-content",1),b(5,ie,6,9,"div",2,ee),C(7,ne,2,0,"div",3),a(),n(8,"mat-card-actions",4)(9,"mat-form-field",5)(10,"input",6),$("ngModelChange",function(c){return O(i.newMessage,c)||(i.newMessage=c),c}),u("keyup.enter",function(){return i.sendMessage()})("ngModelChange",function(){return i.onTyping()}),a()(),n(11,"button",7),u("click",function(){return i.sendMessage()}),n(12,"mat-icon"),m(13,"send"),a()()()()),r&2&&(o(5),S(i.messages),o(2),_(i.isOtherTyping?7:-1),o(3),w("ngModel",i.newMessage),o(),l("disabled",!i.newMessage.trim()))},dependencies:[D,E,j,Z,x,B,N,q,W,L,H,V,A,G,z,K,J,R,Q,X,U],encapsulation:2});let t=e;return t})();export{be as PageOneComponent};
